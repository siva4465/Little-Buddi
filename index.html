<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Birthday Card</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <canvas id="confetti-canvas"></canvas>

    <div class="card" id="card">
      <div class="outside">
        <div class="front">
          <p>Happy Birthday <br><br>ğŸ¥°Buddi ChelliğŸ˜˜</p>
          <div class="cake">
            <div class="top-layer"></div>
            <div class="middle-layer"></div>
            <div class="bottom-layer"></div>
            <div class="candle"></div>
          </div>
        </div>
        <div class="back"></div>
      </div>

      <div class="inside">
        <p>
          To my crazy little moon ğŸŒ <br />
          Wishing you a super fun ğŸ’ƒğŸ» <br />
          Happy Birthday ra Buddi! â¤ï¸â€ğŸ”¥
        </p>
        <img src="img.jpg" alt="Birthday Wish" class="wish-image" />
      </div>
    </div>

    <!-- Canvas Confetti from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Confetti Trigger and Flip Script -->
    <script>
      const card = document.getElementById("card");
      const outside = document.querySelector(".outside");
      let isTouchDevice = "ontouchstart" in window || navigator.maxTouchPoints > 0;
      let isFlipped = false;

      function launchConfetti() {
        const duration = 3 * 1000;
        const end = Date.now() + duration;

        (function frame() {
          confetti({
            particleCount: 5,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
          });
          confetti({
            particleCount: 5,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
          });

          if (Date.now() < end) {
            requestAnimationFrame(frame);
          }
        })();
      }

      function toggleCardFlip() {
        if (isFlipped) {
          outside.style.transform = "rotateY(0deg)";
          card.style.transform = "rotate(0deg)";
        } else {
          outside.style.transform = "rotateY(-130deg)";
          card.style.transform = "rotate(-5deg)";
          launchConfetti();
        }
        isFlipped = !isFlipped;
      }

      if (isTouchDevice) {
        card.addEventListener("touchstart", toggleCardFlip);
      }

      // Optional: also run confetti on mouse click (desktop)
      card.addEventListener("click", () => {
        if (!isTouchDevice) toggleCardFlip();
      });
    </script>
  </body>
</html>
